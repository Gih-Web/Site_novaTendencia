<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marketing do Logista — PetAmigo</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Estilos da página -->
  <link rel="stylesheet" href="../css/promocoes.css" />
  <link rel="stylesheet" href="../CSS/style.css">
</head>
<body>
  <!-- ================= HEADER ================= -->
  <header class="header d-flex align-items-center justify-content-between px-3 py-2 shadow-sm bg-white">
    <div class="logo">
      <a href="/index.html"><img src="../IMG/Logo1.png" alt="Logo da Loja Nova Tendência" height="40"/></a>
    </div>

    <div class="search-box flex-grow-1 mx-3">
      <input type="text" class="pesquisar form-control" placeholder="Pesquisar">
    </div>

    <div class="d-flex align-items-center gap-3">
      <img src="../IMG/ajuda-chat.png" alt="Chat" class="icon">
      <div class="cart-wrapper position-relative">
        <img src="../IMG/sacola.png" id="cart-icon" alt="Carrinho" class="icon">
        <span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display:none;">0</span>
      </div>
      <a href="/PAGINAS/login.html"><img src="../IMG/usuario.png" alt="Perfil" class="icon"></a>
    </div>
  </header>

  <main class="container my-4">

    <!-- ================= BANNERS ================= -->
    <section class="mb-5" aria-labelledby="titulo-banners">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
        <h4 id="titulo-banners" class="section-title m-0">Banners</h4>
        <span class="text-muted small">Tabela: <code>Banners</code></span>
      </div>

      <div class="card shadow-sm">
        <div class="card-header bg-white">
          <strong>Cadastrar/Atualizar banner</strong>
        </div>
        <div class="card-body">
          <form id="formBanner" class="row g-3" enctype="multipart/form-data">
            <div class="col-12 col-md-4">
              <label class="form-label">Imagem do banner</label>
              <div class="banner-thumb border rounded d-flex align-items-center justify-content-center mb-2" id="bannerPreview">
                <span class="text-muted">Prévia</span>
              </div>
              <input type="file" name="imagem" class="form-control" accept="image/*" required>
              <div class="form-text">* Formato JPEG/PNG. Upload real via backend.</div>
            </div>

            <div class="col-12 col-md-8">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Data de validade</label>
                  <input type="date" name="data_validade" class="form-control" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Categoria (opcional)</label>
                  <select name="categoria_id" class="form-select">
                    <option value="">— Sem vínculo —</option>
                    <option value="1">Acessórios</option>
                    <option value="2">Alimentos</option>
                    <option value="3">Higiene</option>
                  </select>
                </div>
                <div class="col-md-8">
                  <label class="form-label">Descrição</label>
                  <input type="text" name="descricao" class="form-control" maxlength="45" placeholder="Texto curto do banner" required>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Link</label>
                  <input type="text" name="link" class="form-control" maxlength="100" placeholder="/promo-pets">
                </div>
              </div>

              <div class="d-flex gap-2 mt-3">
                <button type="submit" class="btn btn-primary">Cadastrar</button>
                <button type="button" class="btn btn-outline-secondary" id="btnEditarBanner">Editar</button>
                <button type="button" class="btn btn-outline-danger" id="btnExcluirBanner">Excluir</button>
              </div>
            </div>
          </form>
        </div>

        <div class="card-body border-top">
          <div class="table-responsive">
            <table class="table align-middle table-hover table-list" id="bannersTable">
              <thead class="table-light">
                <tr>
                  <th style="width:100px;">Imagem</th>
                  <th>Descrição</th>
                  <th>Link</th>
                  <th>Categoria</th>
                  <th>Validade</th>
                  <th class="text-end" style="width:170px;">Ações</th>
                </tr>
              </thead>
              <tbody id="bannersTableBody">
                <!-- JS irá preencher -->
              </tbody>
              <tfoot>
                <tr><td colspan="6" class="small text-muted">* Lista será carregada dinamicamente via backend.</td></tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= CUPONS ================= -->
    <!-- Mesma estrutura, adicionar IDs para JS se desejar -->
    <!-- ... (mantém seu HTML de cupons) ... -->

  </main>

  <footer class="footer py-4 border-top text-center small text-muted">
    © <span id="year"></span> PetAmigo — Área de Marketing
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Banner JS -->
  <script src="../js/banners.js"></script>

  <script>
    // Atualiza ano no footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Prévia da imagem ao selecionar
    const bannerInput = document.querySelector('input[name="imagem"]');
    const bannerPreview = document.getElementById('bannerPreview');
    bannerInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(ev) {
        bannerPreview.innerHTML = `<img src="${ev.target.result}" class="img-fluid rounded">`;
      }
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
